<!DOCTYPE html>
<html ng-app="Reader.popup" ng-csp="true">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="Stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css"/>
    <link rel="Stylesheet" type="text/css" href="css/popup.css"/>
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-sanitize.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/services.js"></script>
    <script src="js/popup.js"></script>
  </head>

  <body ng-controller="PopupCtrl">
    
    <div id="list-view" ng-show="view == views.list">
      <header>
        <a ng-show="currentList != lists.unread" ng-click="showList(lists.unread)">Show unread items</a>
        <a ng-show="currentList != lists.all" ng-click="showList(lists.all)">Show all items</a>
         | 
        <a ng-click="list.markAllAsRead()">Mark all as read</a>
        <a class="pull-right" href="https://www.google.com/reader/">Google Readerâ„¢</a>
      </header>
      <div class="grn-container" when-scrolled="loadMoreItems()">
        <ul class="grn-items-list">
          <li class="grn-list-item" 
              ng-class="{read: item.read}" 
              ng-repeat="item in list.items">
            <span class="grn-rating" ng-class="{'grn-starred': item.starred}" ng-click="rate(item)"></span>
            <a ng-click="showItemView($index, $event)">
              <!--This is wrapped in an a element to disable smooth scrolling on middle click-->
              <div class="grn-item-description">
                <div class="grn-column-origin" title="{{item.origin.title}}" ng-bind-html="item.origin.title">
                </div>
                <div class="grn-column-title" title="{{item.title}}">
                  <span class="grn-title" ng-bind-html="item.title"></span>
                  <span class="grn-snippet">{{item.snippet}}</span>
                </div>
              </div>
            </a>
          </li>
        </ul>
        <div class="grn-loading" ng-show="list.loading">
          <img src="img/loading.gif"/>  
        </div>
        <div class="grn-empty" ng-show="list.empty">
          No items in this list. <span ng-show="currentList == lists.unread">Show <a ng-click="showList(lists.all)">all items</a> instead?</span>
        </div>
      </div>
    </div>
    
    <div id="item-view" ng-show="view == views.item">
      <header>
        <div class="grn-navigation btn-group">
          <button class="btn btn-small" ng-click="showPreviousItem()" ng-disabled="!iterator.hasPrevious()" title="{{iterator.previousDescr}}">
            <i class="icon-chevron-left"></i>
          </button>
          <button class="btn btn-small" ng-click="showListView()" title="list">
            <i class="icon-align-justify"></i>
          </button>          
          <button class="btn btn-small" ng-click="showNextItem()" ng-disabled="!iterator.hasNext()" title="{{iterator.nextDescr}}">
            <i class="icon-chevron-right"></i>
          </button>      
        </div>
        <span class="grn-rating" ng-class="{'grn-starred': iterator.current.starred}" ng-click="rate(iterator.current)"></span>
        <div class="grn-info"> 
          <p>
            <a href="{{iterator.current.url}}" class="grn-title" title="{{iterator.current.title}}" ng-bind-html="iterator.current.title"></a>
          </p>
          <p>
            <a href="{{iterator.current.origin.url}}" class="grn-origin" title="{{iterator.current.origin.title}}" ng-bind-html="iterator.current.origin.title"></a>
          </p>
        </div>
      </header>
      <div class="grn-container">
        <div class="grn-content" bind-compile-html="iterator.current.content"></div>
      </div>
    </div>
  
  </body>
</html>